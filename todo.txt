TODO:

  -- CORRECTNESS
    - minimizing and then un-minimizing and attempting to edit crashes :(
    - fix all the CATransaction bugs and so on that always show up in the XCode console

  -- BIG THINGS
    - search improvements
      - case insensitive
      - replace
        - replace next
        - replace all
      - find next and continue highlighting (like cmd+d in sublime)
      - find (and highlight) all
      - regex (ðŸ˜±)
        - will probably have to write our own parser...
        - start by supporting just concatenation, '*', '.', '[]', '\d', '\D', '\w', '\W', '\s', '\S'
    - plugin architecture, user-created commands
        - vim-style bindings for json for example (moving up and down through parent/child ast nodes rather than by line, etc.)
        - autocomplete plugin
        - smart indentation by file type
    - decorations
      - will need one more rope structure
      - should support:
        - folding regions
        - underline, bold, italic
        - highlight (background color)
        - text color
        - hyperlinks (action on click)
          - change style on mouseover
      - build api around this to support custom tokenization and highlighting of grammars
        - come up with a file format (or look into supporting textmate's format) which can work with a generic highlighter
    - serialize and save all state so we can close and reopen the app and still keep our open buffers, full undo history, etc.

  -- LITTLER THINGS
    - switch to #RRGGBB and #AARRGGBB for colors in the preferences file
    - shift + a is wrong
    - pasting over visually highlighted lines is wrong
      - need to put an extend to lines somewhere
    - enter should indent as much as the previous line (auto-indent hack)
    - use NSTabView and friends rather than current tab situation
      - if opening a file which is already open in another tab, just switch to that tab
    - cmd + ',' to get to config file, and open in new tab by default
    - new window
    - more file type icons
    - ui to indicate when a file is unsaved
      - should also do a popup when closing a tab (or the whole app) if unsaved stuff
    - show animation in the sidebar when opening a folder
    - drag file onto editor or icon to open

  -- PERFORMANCE
    - fix kmp search incremental stuff
    - when we paste a large text block things get real slow 
      - maybe we're not splitting it up into a balanced tree in the same way we would if we were reading text??